<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="mobile.css">
    <link rel="icon" href="https://cdn.discordapp.com/attachments/1058800929962475531/1280475249850187849/logo.png?ex=66d83701&is=66d6e581&hm=43944e758b15d415879a757f279a090f27e4cf0f30eccbd73417b2e318f32dd4&">
    <title>11Б</title>
</head>
<body>
    <main>
        <div id="clock">Загрузка...</div>
        <div id="schedule">чезабретто</div>
        <a href="days_mobile.html" id="upper_two"><h1>Расписание</h1></a>
        <a href="requests_mobile.html"><h1>Ссылки</h1></a>
        <a href="ring_mobile.html"><h1 id="green">Звонки</h1></a>
        <a href="https://classroom.google.com/h" target="_blank"><!-- <div class="icon"><img src="logo/class.png" id="icon"></div> --><h1 id="new">Google Class</h1></a>
        <p>by Ivan Presnyakov</p>
    </main>
    <script>
        const lessons = [
            {start: "08:00", end: "08:40"},
            {start: "08:50", end: "09:30"},
            {start: "09:40", end: "10:20"},
            {start: "10:30", end: "11:10"},
            {start: "11:25", end: "12:05"},
            {start: "12:15", end: "12:55"},
            {start: "13:00", end: "21:40"}
        ];
    
        function pad(num) {
            return num.toString().padStart(2, '0');
        }
    
        function getTimeRemaining(endTime) {
            const now = new Date();
            const end = new Date();
            const [hours, minutes] = endTime.split(':');
            end.setHours(hours);
            end.setMinutes(minutes);
            end.setSeconds(0);
    
            const diff = end - now;
            if (diff <= 0) return null;
    
            const minutesLeft = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
            const secondsLeft = Math.floor((diff % (1000 * 60)) / 1000);
    
            return `${pad(minutesLeft)}:${pad(secondsLeft)}`;
        }
    
        function getCurrentLesson() {
            const now = new Date();
            const nowTime = pad(now.getHours()) + ':' + pad(now.getMinutes());
    
            // Проверяем, начался ли учебный день (с 7:50 до окончания последнего урока)
            const startDay = "07:50";
            const endDay = "21:40";
            if (nowTime < startDay || nowTime > endDay) {
                document.getElementById('schedule').textContent = 'чезабретто';
                return;
            }
    
            // Определение текущего урока или перемены
            for (let i = 0; i < lessons.length; i++) {
                const lessonStart = lessons[i].start;
                const lessonEnd = lessons[i].end;
    
                // Если текущее время в пределах урока
                if (nowTime >= lessonStart && nowTime <= lessonEnd) {
                    const remainingTime = getTimeRemaining(lessonEnd);
                    document.getElementById('schedule').textContent = `Урок ${i + 1}. До конца: ${remainingTime}`;
                    return;
                }
    
                // Если текущее время в пределах перемены перед уроком
                if (i < lessons.length - 1 && nowTime > lessonEnd && nowTime < lessons[i + 1].start) {
                    const remainingTime = getTimeRemaining(lessons[i + 1].start);
                    document.getElementById('schedule').textContent = `Перемена. До начала урока ${i + 2}: ${remainingTime}`;
                    return;
                }
            }
        }
    
        function updateTime() {
            const now = new Date();
            const hours = pad(now.getHours());
            const minutes = pad(now.getMinutes());
            const seconds = pad(now.getSeconds());
            document.getElementById('clock').textContent = `${hours}:${minutes}:${seconds}`;
    
            getCurrentLesson();
        }
    
        setInterval(updateTime, 1000);
        updateTime(); // Запуск сразу при загрузке страницы
    </script>
</body>
</html>